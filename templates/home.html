{% extends 'base.html' %}

{% block title %}Mafia â€” Home{% endblock %}

{% block head %}
<!-- Page-specific minimal styles kept for first-pass migration -->
<style>
  .container-center{max-width:560px;margin:12vh auto}
  .intro{font-size:1.05rem;color:var(--muted);margin-bottom:18px}
  .actions{display:flex;gap:12px;justify-content:center}
  #room_input{width:60%;min-width:160px}
  @media(max-width:720px){ #room_input { width:100% } }
</style>
{% endblock %}

{% block content %}
  <div class="card container-center center">
    {% if error %}
      <div class="card" style="margin-bottom:12px;background:#fff6f6;border:1px solid rgba(220,38,38,0.08);color:var(--danger)">{{ error }}</div>
    {% endif %}
    <h1 style="margin:0 0 8px 0">MAFIA</h1>
    <p class="intro">The classic party game of deception and deduction, now online.</p>
    <div class="actions">
      <a class="btn btn-primary" href="{{ url_for('create_room') }}">Create a Game Room</a>
      <a class="btn btn-ghost" href="{{ url_for('host_login') }}">Host Login</a>
    </div>

    <div style="margin-top:20px">
      <form method="get" action="{{ url_for('join_page', room_name='') }}" onsubmit="event.preventDefault(); window.location.href='/room/' + encodeURIComponent(document.getElementById('room_input').value)">
        <div class="form-row" style="justify-content:center;margin-top:12px">
          <input id="room_input" class="input" type="text" placeholder="Enter room name to join..." required />
          <button class="btn btn-primary" style="min-width:120px">Join</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/static/sw.js').catch(function(err){ console.warn('SW registration failed:', err); });
    });
  }
</script>
{% endblock %}